## Title: [1Week] 박철현

### 미션 요구사항 분석 & 체크리스트

---
  [1주차 미션 페이지](https://wiken.io/ken/12201#1%EC%A3%BC%EC%B0%A8)

### 1주차 미션 요약
- [x] (필수미션) 호감 상대 삭제
  - [x] 삭제 처리 전 해당 항목에 대한 소유권이 본인(로그인한 사람) 인지 확인
  - [x] 삭제 후 다시 호감 목록 페이지로 돌아오기(rq.redirectWithMsg 사용)
    - [x] 호감 정보 삭제
    - [x] 삭제 후 호감 목록 페이지 돌아오기
- [ ] (선택미션) 구글 로그인
---

**[접근 방법]**
<br>
- 구현 전 : 
  - 목표 수립 : 필수 미션 100% 구현, 선택 미션 시도
  - 선행 작업 : 그램그램 1 ~ 47강 다시 보기 (04.03 13:00 ~ 04.04 23:30)
    -> RsData 등 수업 시간에 들었던 내용을 다시 보니 알지 못해 처음부터 다시 수강
  
    <br>
- 구현 중 :
  - 참고 자료 : 점프투스프링부트 "3-10 수정과 삭제"
  - 시행착오
    - (해결 방안 고민) id를 인자로 받기에, id로 어떻게 해야 할지 고민하다가 id를 활용해 삭제할 객체(호감 정보)를 찾기고 생각하고 구현
    - (Url 맵핑 오류) 데이터 삭제 후 호감 목록 페이지로 가는 Redirect에 "likeablePerson/delete/" 가 선행되어 목록 페이지가 나오지 않음
      -> 해결 : rq.redirectWithMsg 인자로 절대경로('/')를 포함하지 않음
      -> redirect시 절대 경로가 없을 경우, 원래 경로에서 상대적으로 찾아가기에 필수
    <br>
- 구현 결과
  - 삭제 기능 구현 : DB 삭제 구현 완료, 기존 생각한 방식 구현 완료
    - (1) 삭제하려는 호감 정보와 현재 로그인 한 사람의 정보를 가져온다.
    - (2) 삭제하려는 likeable_person 테이블 내에 from insta id(올린 사람의 인스타 정보)와 로그인 한 사람이 동일한 사람인지 비교
    - (3) (2)의 결과가 동일인이면 삭제, 아닐 경우 오류 메시지 출력
    
    <br>
  - 페이지 이동 실패 : 삭제 후 list 페이지로 이동 기능 실패
    - (1차 시도) Rq의 redirectWithMsg 메소드를 확인했으나 이상이 없는 것 같음.
    - (2차 시도) delete 메소드를 잘못 구현한지 확인했으나 이상 없음(return 값을 메소드가 아닌 redirect list를 했더니 정상 동작)
    - (결론) 기능 구현한 메소드는 정상 동작하나, Url이 앞에 붙는 이유를 해결하지 못함
      
    <br>
**[특이사항]**

- 아쉬웠던 점 : 상대 경로 문제를 해결하고자 오래 걸림, 망설이다 장병순 멘토님께 질문드렸으나 진작에 여쭤볼껄..

- 궁금한 점
  - LikeableRepository에 findById를 선언했는데 해당 메소드의 리턴값을 optional로 해야 하는 이유
    - LikeableService 에서 delete 메소드 구현 시, 삭제할 호감표시 정보(객체)를 가져오기 위해 findById를 Repository에서 구현
    - 리턴값을 LikeablePerson으로 하려 했더니, Optional로 해야 한다고 빨간색으로 떠서 불필요한 DataNotFoundException을 점프투스프링에서 가져와 예외 처리를 해줬다.
    - Entity 클래스를 반환 값으로 못하고 Optional을 써야 할지 모르겠다.


- 리팩토링 시 추가 진행 방향
  - (1) Url 버그 수정
  - (2) 구글 로그인 도전


  **참고: [Refactoring]**
  - LikeableRepository에 findById를 선언했는데 해당 메소드의 리턴값을 Optional이 아닌 LikeablePerson으로 수정
  - 구글 로그인 기능 구현 시도